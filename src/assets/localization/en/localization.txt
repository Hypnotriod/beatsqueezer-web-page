@@HEADER_H1:The Beatsqueezer
@@HEADER_H2:Hi-Fi 16 Voice Polyphonic Sample Player
@@FOOTER:Designed by Hypnotriod 2019©
@@MENU:Menu
@@ABOUT:About
@@DOWNLOADS:Downloads
@@PHOTOS:Photos
@@VIDEOS:Videos
@@FEATURES:Features
@@MANUAL:Manual
@@EDITOR:Banks Editor

@@DOWNLOADS_HEDER_1:Demo Banks:
@@DOWNLOADS_HEDER_2:Banks Editor:
@@DOWNLOADS_HEDER_3:Firmware rev. 2 (128x160 TFT):
@@DOWNLOADS_HEDER_4:Android applications:
@@DOWNLOADS_HEDER_5:Firmware rev. 1 (16x2 LCD):
@@DOWNLOADS_HEDER_6:Design resources rev. 1 (16x2 LCD):

@@ABOUT_ARTICLE:
<p> The Beatsqueezer - small sample player device which produce Hi-Fi sound in 44100 Hz 24 bit stereo, with up to 16 mono (can be applied panorama) or stereo voices polyphony in 44100 Hz 16 bit. It is designed to bring on stage Mellotron-style synthesizer with unique sampled instruments, one shot / looped samples sets, drums, backing tracks, sound effects etc. </p>

<ul>
    <li>4GB internal flash memory for keeping samples Banks aka Patches.<br>
    Up to 13 hours 20 minutes of mono or 6 hours 40 minutes stereo samples.<br>
    After loading to the device’s internal memory all Banks are immediately available, no SD card present is required.
    </li>
    <li>4 knobs for fx filters.<br>
    Each filters parameters can be accessed with MIDI CC as well.
    </li>
    <li>1 rotary encoder with button for menu navigation.</li>
    <li>128x160 color TFT display.</li>
    <li>3.5 jack MIDI IN.</li>
    <li>6.3 jack stereo audio output.</li>
    <li>Micro SD card slot.</li>
    <li>Full size USB B connector for device powering.<br> 
    Can be used any 500 mA power source: mobile phone charger, 5V adapter with USB socket, power bank, etc.<br>
    And for communication with PC, MAC, mobile phones and tablets (with usb host feature) thru USB-MIDI protocol.
    </li>
</ul>

<p> With "Banks Editor" software, user has possibility to create his own samples Banks (paches): </p>

<ul>
    <li>Up to 3 samples ("Default", "Piano" and "Forte") for each of 128 notes with unlimited sample length.</li>
    <li>Sample Loop Point, for infinitive playback.</li>
    <li>Cut Group, for playing only one sample at one time from specific group (for example: open and close hat, solo instrument), "self" group to stop playing only same sample, if corresponding note pressed twice and "none" group for multiple sample playback.</li>
    <li>Dynamic or Fixed velocity for each sample.</li>
    <li>"One Shot" behaviour.</li>
    <li>If "One Shot" and Loop Point are defined, sample goes to "Loop trigger" mode, when 1-st press will play sample and 2-nd will stop it.</li>
    <li>Stereo panorama for each note (mono samples only).</li>
</ul>
<p> Also implemented simple MIDI files track Player. Can be played one MIDI Track from song (MIDI file) at one time. Tracks can be switched (next Track will be played after end of previous) and looped in real time. MIDI Player can be triggered and synced with master sequencer, by MIDI Clock and MIDI messages: </p>
<ul>
    <li>Start (Play MIDI Track)</li>
    <li>Stop (Stop MIDI Track)</li>
    <li>Song Select (Change MIDI Track)</li>
</ul>
<p> 
    With "Split Mode" feature, possible to split keyboard in up to 4 ranges (groups), and load individual Bank for every group.<br>
    Beatsqueezer has a number of master filters and special effects that are available simultaneously: 
</p>
<ul>
    <li>Low Pass Resonant filter</li>
    <li>Ring Modulation</li>
    <li>Flanger</li>
    <li>Stereo Rotary Vibrato</li>
    <li>Limiter</li>
    <li>Bitcrusher</li>
    <li>Granular Glitch</li>
    <li>Delay with Low Pass and High Pass filters</li>
    <li>ADSR envelope for Amplitude</li>
    <li>ADSR envelope for Low Pass filter</li>
    <li>Velocity dependent Attack and Timeshift </li>
</ul>

<p> Via MIDI messages are supported: </p>	
<ul>
    <li>Pitch Bend Wheel +2/-2 semitones</li>
    <li>Modulation Wheel</li>
    <li>Expression Pedal</li>
    <li>Sustain Pedal</li>
    <li>Sostenuto Pedal</li>
    <li>Volume</li>
    <li>Channel Pressure (Aftertouch)</li>
    <li>Program Change (Bank selection) </li>
	<li>Program Change LSB (Split Group selection) </li>
</ul>

<p> 
    For onboard knobs implemented the "Smart Knobs" behaviour - the filter value will react to the knob position only if the actual knob position and the filter value match. <br>
    There is a possibility to upgrade firmware from SD card thru built in bootloader. 
</p>

@@FEATURES_ARTICLE:
<p> <h3> Main features: </h3></p>
<p>
    <ul>
        <li>Stereo output thru 6.3 jack, with a sample rate of 44100 Hz 24 bit</li>
        <li>16 mono / stereo voices polyphony, with a sample rate of 44100 Hz 16 bit</li>
        <li>Up to 3 samples: "Default", "Piano" (vel. 1 - 60) and "Forte" (vel. 110 - 127) for each note </li> 
        <li>Up to 128 notes per Bank</li>
        <li>Up to 128 Banks</li>
        <li>Up to 4GByte flash memory (all for user Banks)</li>
        <li>Up to 13 hours 20 minutes of mono or 6 hours 40 minutes stereo samples</li>
        <li>Possibility to choose particular program number for each Bank, or set program number to "any", to arrange all Banks in alphabetical order </li>
        <li>Powering thru USB B socket (can be used: mobile phone charger, 5V adapter with USB socket, power bank, etc)</li>
        <li>MIDI thru MIDI IN (3.5 jack) and USB-MIDI at one time</li>
        <li>Loading Banks from SD card (supported FAT32)</li>
        <li>Simple MIDI Tracks Player </li> 
        <li>Built in bootloader for firmware upgrade or installation different one</li>
        <li>Intuitive and simple navigation thru menu, using only one rotary encoder</li>
        <li>Supports Pitch Bend Wheel +2/-2 semitones </li>
        <li>Supports Modulation Wheel with selectable mode (Vibrato value, Low Pass Cut Off, Flanger value or Volume) </li>
        <li>Supports Expression Pedal with selectable mode (Vibrato value, Low Pass Cut Off, Flanger value or Volume) </li>
        <li>Supports Channel Pressure (Aftertouch) with selectable mode (Vibrato value, Low Pass Cut Off, Volume or disabled) </li>
        <li>Supports Sustain Pedal </li>
        <li>Supports Sostenuto Pedal </li>
        <li>Supports Program Change (Bank selection) </li>
        <li>Keyboard split feature, up to 4 split groups (ranges) with individual Bank for every group. Can be changed via "Program Change LSB" message: 0 - ALL, 1 - group A, 2 - group B, 3 - group C, 4 - group D, 5 - groups A-B, 6 - groups C-D  </li>
        <li>Smooth parameters changing of filters and FX </li>
		<li>Change default MIDI CC numbers for all FX parameters (Can be assigned to 102 undefined or general purpose CC numbers) </li>
        <li>Possibility to define initial values for all filters parameters per Bank</li>
        <li>Save initial FX values per Bank, with "double click" in "Knobs FX Patterns" menu or "Change Program" in "Manage Bank" menu </li>
        <li>Change between CC numbers or CC values view, with "click" in "Knobs FX Patterns" menu </li>
        <li>Loop Point for each sample</li>
        <li>Cut Group for each sample</li>
        <li>Dynamic or fixed velocity for each sample</li>
        <li>"One Shot" behaviour for each sample</li>
        <li>Stereo panorama for each sample (mono samples only)</li>
        <li>"Smart knobs" behaviour</li>
        <li>"Loop trigger" mode</li>
        <li>Selectable USB-MIDI wire (1-16) </li>
        <li>Selectable MIDI channel (1-16)</li>
        <li>Minimum bottom velocity (0-127)</li>
        <li>Staccato or legato attack for LP ADSR filter</li>
        <li>Saving and loading settings </li>
        <li>128x160 color TFT display</li>
        <li>4 knobs</li>
        <li>1 rotary encoder with button</li>
    </ul>
</p>

<p> <h3> Filters: </h3></p>
<p>
    <ul>
        <li>Low Pass Resonant filter</li>
        <li>Ring Modulation</li>
        <li>Flanger</li>
        <li>Stereo Rotary Vibrato</li>
        <li>Limiter</li>
        <li>Bitcrusher</li>
        <li>Granular Glitch</li>
        <li>Delay with Low Pass and High Pass filters</li>
        <li>ADSR envelope for Amplitude</li>
        <li>ADSR envelope for Low Pass filter</li>
        <li>Velocity dependent Attack and Timeshift </li>
    </ul>
</p>

<p><h3>MIDI Player features:</h3></p>
<p>
    <ul>
        <li>Play MIDI file Track from SD card (supported FAT32)</li>
        <li>Loop Track</li>
        <li>Switching Tracks in real time to play one after another</li>
        <li>Change Tempo or sync with master sequencer</li>
    </ul>
</p>

<p><h3>Additional information:</h3></p>
<p>
    <ul>
        <li>DSP by STM32F407 168MHz microcontroller</li>
        <li>CS4334 audio DAC</li>
        <li>AD8532 amplifier</li>
        <li>4GB Samsung NAND internal flash memory</li>
        <li>230 mA power consumption</li>
        <li>5ms latency</li>
        <li>1.8 inch ST7735R SPI 128*160 TFT LCD Display</li>
        <li>3.5 jack to DIN5 MIDI IN pinout: Sleeve - 2, Ring - 5, Tip - 4</li>
        <li>Device weight: 320 grams</li>
        <li>Device dimensions: 115mm x 91mm x 45mm</li>
        <li>Steel case dimensions: 115mm x 75mm x 25mm</li>
    </ul>
</p>

@@EDITOR_ARTICLE:
<p>
    The Beatsqueezer Bank editor software allows user to create his own sample-Banks files.
    MAC, Linux and Windows supported. Requires Java SE Runtime Environment 8 (jre)<br>
    Page on <a href="https://github.com/Hypnotriod/beatsqueezer-bank-editor" target="_blank">Github</a>
</p>
<p>
    To check Java availability - type in console: <span class="code">java -version</span><br>
    To be able to launch the .jar file with a "double click" on MAC OS, you need to make it executable: <span class="code">sudo chmod +x&nbsp;</span> then drag .jar file into console, and press enter.<br>
    At least you can always start the program by typing in the console: <span class="code">java -jar&nbsp;</span> then drag .jar file into console, and press enter.
</p>

<p> <h3>Usage tips:</h3></p>

<p>
    <ul>
        <li>Hover over user interface elements to get pop-up information.</li>
        <li>Please note that all added samples will be immediately affected by the parameters from the top configuration panel. And you cannot change the "Pitch" or "Normalization" of the sample after loading it.</li>
        <li>All other sample parameters can be changed individually at sample panel.</li>
        <li>Use "Macro" option, to change specific parameter for all loaded samples.</li>
        <li>Notes names are based on MIDI specification. Where C0 (0) is the lowest note, G10 (127) is the highest note, and C5 (60) is the "Middle C". You can choose between "C5", "C4" or "C3" as "Middle C" at "Options" -> "Notes Names Display"</li>
        <li>To easily load batch of samples in right order - name all your sample files with number at the start.<br>For example: "01_Sample_C5", "02_Sample_C#5", "03_Sample_D5" etc.</li>
        <li>Use "Pitch Step" option, if you have samples with interval more than semitone. Or if you want to populate keyboard with one sample.</li>
        <li>To use "Loop" point your sample wav file should have "Sustain Loop", "Loop" or "Marker" info. You can add it with audio editor such as "Wavosaur", "Sound Forge", using "M" hotkey (insert marker at playbar/cursor) </li>
        <li>To use "Piano" and "Forte" feature you can name your sample files with "_p" and "_f" at the end.<br>For example: "01_Sample_C5" ("default" sample name), "01_Sample_C5_p" ("piano" sample name) and "01_Sample_C5_f" ("forte" sample name). Then load all samples simultaneously. Or simply drag and drop them into corresponding slot.</li>
        <li>For correct displaying, the name length of the Bank should be not more than 16 characters and consist only of Latin letters.</li>
    </ul>
</p>

<p> <h3>Features:</h3></p>
<p>
    <ul>
        <li>Supports Wave PCM 8, 16 and 24 bit various sample rate mono and stereo files, with auto conversion into 44100 Hz 16 bit </li>
        <li>Up to 3 samples: "Default", "Piano" (vel. 1 - 60) and "Forte" (vel. 110 - 127) for each of 128 notes </li> 
        <li>Cut Group</li>
        <li>Dynamic or fixed velocity</li>
        <li>"One Shot" behaviour</li>
        <li>Loop Point (by "Sustain Loop", "Loop" or "Marker" info in wav file)</li>
        <li>Peak normalization</li>
        <li>Stereo panorama (mono samples only)</li>
        <li>Default values for all filters parameters</li>
        <li>Pitch</li>
        <li>Pitch step</li>
        <li>Macro</li>
        <li>Exporting all Bank samples as wav files</li>
        <li>Drag and Drop</li>
    </ul>
</p>

@@MANUAL_ARTICLE:

<p><h3>Device powering:</h3></p>
<p>
    Device can be powered via USB-B socket with any 500 mA (or more) power source: mobile phone charger, 5V adapter with USB socket, power bank, etc.<br>
    Please use external power source and MIDI connection to avoid noises caused by ground loop. For example if several audio device are powered from usb port of same laptop or pc.  
<p>

<p><h3>Banks (patches):</h3></p>
<p>
    Device works only with Bank files (.btsqbank). <br>
    All Banks files can be loaded only from micro SD card.<br>
    To load own samples user should create a Bank file using "Beatsqueezer Bank editor" software (Please navigate to Banks Editor tab for more details).
<p>

<p><h3>MIDI Player:</h3></p>
<p>
    The MIDI Player plays tracks from midi files (.mid). <br>
    Only one track can be played simultaneously. This allows to switch between these tracks in real time, like switching patterns in a sequencer. <br>
    Tracks can be looped. <br>
    Sequencer can be synced with external master sequencer device by MIDI Clock message, and triggered by Start / Stop messages. <br>
<p>

<p><h3>Menu navigation with encoder:</h3></p>
<p>
    <ul>
        <li>Rotate encoder to switch menu items, change parameters, browse files etc.</li>
        <li>Press encoder button (down & up) to select menu item, confirm etc.</li>
        <li>Hold encoder button down to exit to previous menu</li>
        <li>Hold encoder button down and rotate for quick navigation thru main menu items, then release button to get in (quick mode)</li>
        <li>"Double click" in the "Knobs FX Patterns" menu to save initial FX parameters for the current Bank</li>
        <li>"Click" in the "Knobs FX Patterns" menu to switch between CC numbers or CC values view</li>
    </ul>
</p>

<p><h3>Manage Bank menu:</h3></p>
<p>
    <ul>
        <li>Change Program.</li>
        Changes program number of selected Bank.
        <li>Save Knobs.</li>
        Saves current knobs positions for selected Bank.
        <li>Save To SD card</li>
        Creates "Beatsqueezer Banks" folder on SD card and saves selected Bank to it. For now this feature is unstable! Can cause "SD card operation Error".
        <li>Delete</li>
        Deletes selected Bank from internal flash memory.
    </ul>
</p>

<p><h3>Settings menu:</h3></p>
<p>
    <ul>
        <li>USB-MIDI Wire (1-16) </li>
        Represents physical MIDI port. Was added just in case and should be always 1.
        <li>MIDI Channel (1-16)</li>
        MIDI channel. Almost often is 1 but sometimes can differs. Check for MIDI output channel number at your controller.
        <li>Additional Velocity (0-127)</li>
        Increases the sensitivity of the MIDI keyboard by adding extra velocity.
        <li>Mixing volume (0% - 100%)</li>
        Volume of internal digital mixer. Can cause clipping if signal too high and internal limiter cannot handle.
        <li>CC Volume Default (0 - 127) </li>
        Default volume level. Resets to this value on Bank change if the option "Reset knobs on Bank change" is set.
        <li>Modulation Wheel mode  </li>
        Used to control Vibrato value, Low Pass Cut Off, Flanger value or Volume by Modulation Wheel. (default: Vibrato value)
        <li>Expression Pedal mode</li>
        Used to control Vibrato value, Low Pass Cut Off, Flanger value or Volume by Expression Pedal. (default: Volume value)
        <li>Expression Pedal minimum value (0-127)</li>
        Bottom limitation of CC value for Expression Pedal.
        <li>Expression Pedal maximum value (0-127)</li>
        Top limitation of CC value for Expression Pedal.
        <li>Channel Pressure (Aftertouch) mode</li>
        Used to control Vibrato value, Low Pass Cut Off, Volume or disabled by Channel Pressure. (default: Volume value)
        <li>Channel Pressure minimum value (0-127)</li>
        Bottom limitation of CC value for Channel Pressure.
        <li>Channel Pressure maximum value (0-127)</li>
        Top limitation of CC value for Channel Pressure.
        <li>Low Pass envelope</li>
        Low Pass envelope behaviour: Staccato (any key press triggers the LP Attack) or Legato (only first key press triggers LP Attack, useful for playing chords)
        <li>Smart Knobs mode (enable disable)</li>
        If enabled - the filter value will react to the knob position only if the actual knob position and the filter value match.
        <li>Reset knobs on Bank change (yes no)</li>
        Resets all filters values to default on Bank change. Does not affect the predefined filter values of Bank.
        <li>Edit controls numbers (CC#) </li>
        Additional submenu where filters CC values can be changed.
        <li>MIDI Player Sync with master (enable disable) </li>
        Synchronizes MIDI Player with mater sequencer clock. 
        <li>Show pressed note info (yes no)</li>
        Shows pressed note name and MIDI number. Where C0 (0) is the lowest note, G10 (127) is the highest note, and C5 (60) is the "Middle C".
        <li>Show switched knob info (yes no)</li>
        Shows information on Control Change, Pitch Bend Wheel, Modulation Wheel, Expression Pedal, Sustain Pedal, Sostenuto Pedal, Volume, Channel Pressure, Program Change and Program Change LSB messages.
        <li>Instant release on Sample Cut (yes no)</li>
        If enabled - sample cut will be always with minimum time. Otherwise sample cut time will depends on Release value.
        <li>Split Mode (enable disable) </li>
        Splits keyboard up to 4 split groups (ranges) with individual Bank for every group. Can be changed via "Program Change LSB" message: 0 - ALL, 1 - group A, 2 - group B, 3 - group C, 4 - group D, 5 - groups A-B, 6 - groups C-D.
        <li>A-B Split Groups Note </li>
        Note name where Split Group B starts.
        <li>B-C Split Groups Note </li>
        Note name where Split Group C starts.
        <li>C-D Split Groups Note </li>
        Note name where Split Group D starts.
		<li>Use Separate ADSR in Split Groups (yes no) </li>
        ADSR values will be kept and changed per each Split Group. Otherwise ADSR values will be common for all Split Groups.
        <li>Save settings </li>
        Saves the current settings into internal flash memory.
        <li>Load settings </li>
        loads last stored settings from internal flash memory.
        <li>Scan internal flash memory for bad blocks ()</li>
        Scanning is performed at initial setup, no need to use this feature!
        <li>Flash memory ID</li>
        4GB version: EC-D7-55-B6-78 <br>
        1GB version: EC-D3-51-95-58
        <li>Banks information</li>
        Number of Banks and memory usage
        <li>Firmware information</li>
        Firmware version and name.
    </ul>
</p>

<p> <h3> FX params and default CC numbers: </h3> </p>
<p>
    <ul>
        <li>Low Pass Cut Off (cc 40)</li>
        <li>Low Pass Resonance (cc 41)</li>
        <li>Ring modulation frequency (cc 42)</li>
        <li>Ring modulation value (cc 43)</li>
        <li>Flanger frequency (cc 44)</li>
        <li>Flanger value (cc 45)</li>
        <li>Rotary Vibrato frequency (cc 46)</li>
        <li>Rotary Vibrato value (cc 47)</li>
        <li>Limiter value (cc 48)</li>
        <li>Bitcrusher value (cc 49)</li>
        <li>Granular Glitch Shift (cc 50)</li>
        <li>Granular Glitch Length (cc 51)</li>
        <li>Delay High Pass value (cc 52)</li>
        <li>Delay Low Pass value (cc 53)</li>
        <li>Delay value (cc 54)</li>
        <li>Delay time (cc 55)</li>
        <li>Amplitude Attack value (cc 56)</li>
        <li>Amplitude Decay value (cc 57)</li>
        <li>Amplitude Sustain value (cc 58)</li>
        <li>Amplitude Release value (cc 59)</li>
        <li>Low Pass Attack value (cc 60)</li>
        <li>Low Pass Decay value (cc 61)</li>
        <li>Low Pass Sustain value (cc 62)</li>
        <li>Low Pass Release value (cc 63)</li>
        <li>Velocity-dependent Amplitude Attack (cc 70) </li>
        <li>Velocity-dependent Timeshift (cc 71) </li>
        <li>Low Pass Envelope Amount (cc 72)</li>
        <li>Low Pass Mix (cc 73)</li>
        <li>Delay Panorama Spread (cc 74)</li>
        <li>Delay Feedback (cc 75)</li>
    </ul>
</p>

<p> <h3> Additional MIDI messages: </h3> </p>
<p>
    <ul>
        <li>Pitch Band Wheel (+2/-2 semitones) </li>
        <li>Modulation Wheel (cc 1) </li>
        <li>Expression Pedal (cc 11) </li>
        <li>Sustain Pedal (cc 64) </li>
        <li>Sostenuto Pedal (cc 66) </li>
        <li>Volume (cc 7)</li>
        <li>Channel Pressure (Aftertouch) </li>
        <li>Program Change (Bank selection) </li>
		<li>Program Change LSB (Split Group selection) </li>
        <li>Start (Play MIDI Track) </li>
        <li>Stop (Stop MIDI Track) </li> 
        <li>Song Select (Change MIDI Track)</li>
    </ul>
</p>

<p><h3>Firmware update steps:</h3></p>
<p>
    <ol type="1">
        <li>Download last firmware file from <a onclick='window.scrollTo("Downloads");'>Downloads -> Firmware</a>.</li>
        <li>Save it to microSD card (should be formatted in FAT32).</li>
        <li>Plug SD card into device.</li>
        <li>Hold encoder button and switch power on to get into "Bootloader mode"</li>
        <li>Choose and install new firmware from SD card.</li>
    </ol>
</p>

